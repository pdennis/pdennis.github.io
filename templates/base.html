<!DOCTYPE html>
<html lang="en" class="dark-mode">
<head>
    {% include "head.html" %}
</head>
<body>
    {% include "header.html" %}
    <main class="main">
        <div class="container">
            {% block content %}{% endblock %}
        </div>
    </main>
    {% include "footer.html" %}
    <script>
    (function() {
        const html = document.documentElement;
        const stored = localStorage.getItem('theme');
        if (stored === 'light') {
            html.classList.replace('dark-mode', 'light-mode');
        } else if (!stored && window.matchMedia('(prefers-color-scheme: light)').matches) {
            html.classList.replace('dark-mode', 'light-mode');
        }
    })();

    function toggleTheme() {
        const html = document.documentElement;
        const isLight = html.classList.contains('light-mode');
        html.classList.replace(isLight ? 'light-mode' : 'dark-mode', isLight ? 'dark-mode' : 'light-mode');
        localStorage.setItem('theme', isLight ? 'dark' : 'light');
    }

    function toggleNav() {
        document.querySelector('.nav-links').classList.toggle('open');
    }

    // Close mobile nav on click outside
    document.addEventListener('click', function(e) {
        const nav = document.querySelector('.nav-links');
        const btn = document.querySelector('.menu-btn');
        if (nav.classList.contains('open') && !nav.contains(e.target) && !btn.contains(e.target)) {
            nav.classList.remove('open');
        }
    });
    </script>
</body>
</html>
